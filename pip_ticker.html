
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		<title>PIP Ticker</title>
		<script id="jquery" type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="stepper.js"></script>
		<script type="text/javascript" src="mousehold.js"></script>
		<script type="text/javascript" charset="utf-8">		
			running = true;
			$(function(){
				$('div.pipTicker').each(function(){
					var pipDiv = this;
					$('a', pipDiv).each(function(){
						var href = $(this).href()
						$(this).mousehold(function(i) {
							var pip = parseFloat($('input#pip').val())
							var hrefPip = parseFloat(href.match(/spin=([\-0-9\.]+)/)[1])
							
							var dp = parseInt($('input#dp').val())
							
							if (hrefPip < 0) pip *= -1
							if (!pip) pip = hrefPip
														
							var s = new stepper(pip, dp)
							console.log("hit number", i)
							var v = parseFloat($('input', pipDiv).val())
							$('input', pipDiv).val(s.step(v))
						})
					})
				})
				
				$('div.pipTicker a').click(function(){ return false })
			})
		</script>
	</head>
	<body>
		<div><label for="pip">Pip:</label>
			<input type="text" name="pip" value="0.025" id="pip" />
		</div>
		<div><label for="dp">DP:</label>
			<input type="text" name="dp" value="3" id="dp" />
		</div>
		
		<div class="pipTicker">
		<div>
		<label for="ctlVal">Trading Value:</label>
			<input type="text" name="some_name" class="number" value="0.650" id="ctlVal"/> 
		<a class="spinner" href="?spin=-0.025">&lt;</a>
		<a class="spinner" href="?spin=0.025">&gt;</a>
		</div>
		</div>
	</body>
</html>